<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>HW2_Mobini_40130023</title>
  <style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}

ul.task-list[class]{list-style: none;}
ul.task-list li input[type="checkbox"] {
font-size: inherit;
width: 0.8em;
margin: 0 0.8em 0.2em -1.6em;
vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}

pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
  <style type="text/css">
body {
font-family: 'IRKoodak';
direction: rtl;
text-align: right;
line-height: 1.6;
margin: 20px;
background-color: #ffffff;

color: #121212;

}

h1,
h2,
h3,
h4,
h5,
h6 {
text-align: right;
color: #000000;

}

p {
text-align: right;
color: #121212;

}

ul,
ol {
text-align: right;
padding-right: 20px;
color: #121212;

}

pre,
code,
.plaintext {
direction: ltr;
text-align: left;
font-family: 'Courier New', Courier, monospace;
background-color: #f5f5f5;

color: #121212;

padding: 10px;
border-radius: 5px;
overflow-x: auto;
}

code {
background-color: #f5f5f5;

color: #121212;

padding: 2px 4px;
border-radius: 3px;
}

blockquote {
border-right: 5px solid #cccccc;

padding-right: 10px;
margin-right: 20px;
color: #555555;

}

table {
width: 100%;
border-collapse: collapse;
margin-bottom: 20px;
background-color: #ffffff;

color: #121212;

}
th,
td {
border: 1px solid #cccccc;

padding: 8px;
text-align: right;
}
th {
background-color: #f5f5f5;

color: #121212;

}</style>
</head>
<body>
<h1 id="تکلیف-2">تکلیف 2</h1>
<h2 id="سوال-1">سوال 1</h2>
<h3 id="الف-چیدمان-حافظه-مربوط-به-یک-پروسس">الف) چیدمان حافظه مربوط به
یک پروسس</h3>
<p>چیدمان حافظه یک پروسس به صورت زیر است:</p>
<pre class="plaintext"><code>+------------------+
|      Stack       |
+------------------+
|      Heap        |
+------------------+
|  Uninitialized   |
|    Data (BSS)    |
+------------------+
|  Initialized     |
|    Data (Data)   |
+------------------+
|      Text        |
+------------------+</code></pre>
<ul>
<li><strong>Text</strong>: شامل کدهای اجرایی برنامه است.</li>
<li><strong>Initialized Data (Data)</strong>: شامل متغیرهای سراسری و
استاتیک که مقداردهی اولیه شده‌اند.</li>
<li><strong>Uninitialized Data (BSS)</strong>: شامل متغیرهای سراسری و
استاتیک که مقداردهی اولیه نشده‌اند.</li>
<li><strong>Heap</strong>: برای تخصیص حافظه پویا در زمان اجرا استفاده
می‌شود.</li>
<li><strong>Stack</strong>: برای ذخیره‌سازی متغیرهای محلی و اطلاعات مربوط
به فراخوانی توابع استفاده می‌شود.</li>
</ul>
<h3 id="ب-context-switch">ب) Context Switch</h3>
<p>Context Switch زمانی اتفاق می‌افتد که سیستم عامل تصمیم می‌گیرد که اجرای
یک پروسس را متوقف کرده و پروسس دیگری را اجرا کند. نقش PCB (Process
Control Block) در این فرآیند بسیار مهم است. PCB شامل اطلاعاتی مانند
شمارنده برنامه، رجیسترها، و وضعیت پروسس است که برای ذخیره و بازیابی
وضعیت پروسس‌ها در هنگام Context Switch استفاده می‌شود.</p>
<h3 id="پ-فرآیند-swapping">پ) فرآیند Swapping</h3>
<p>Swapping فرآیندی است که در آن یک پروسس به طور موقت از حافظه اصلی به
حافظه جانبی (مانند دیسک) منتقل می‌شود تا فضای بیشتری برای پروسس‌های دیگر
فراهم شود. این عمل زمانی انجام می‌شود که حافظه اصلی پر شده باشد و سیستم
نیاز به فضای بیشتری برای اجرای پروسس‌های جدید یا فعال دارد.</p>
<h2 id="سوال-2">سوال 2</h2>
<h3 id="الف-پروسس-والد-به-کمک-کدام-system-call-میتواند-اجرای-پروسس-فرزند-را-خاتمه-دهد">الف)
پروسس والد به کمک کدام system call می‌تواند اجرای پروسس فرزند را خاتمه
دهد؟</h3>
<p>پروسس والد می‌تواند با استفاده از system call <code>kill</code> اجرای
پروسس فرزند را خاتمه دهد.</p>
<h3 id="ب-3-دلیل-برای-انجام-این-کار-را-بیان-کنید">ب) 3 دلیل برای انجام
این کار را بیان کنید</h3>
<ol type="1">
<li>پروسس فرزند به درستی کار نمی‌کند و باعث ایجاد مشکلات در سیستم
می‌شود.</li>
<li>پروسس والد نیاز به منابع بیشتری دارد و می‌خواهد منابعی که توسط پروسس
فرزند استفاده می‌شود را آزاد کند.</li>
<li>پروسس فرزند به پایان رسیده است و دیگر نیازی به اجرای آن نیست.</li>
</ol>
<h3 id="پ-پروسس-zombie-چیست-و-در-چه-شرایطی-ایجاد-میشود">پ) پروسس zombie
چیست و در چه شرایطی ایجاد می‌شود؟</h3>
<p>پروسس zombie پروسسی است که اجرای آن به پایان رسیده است ولی هنوز
اطلاعات آن در جدول پروسس‌ها باقی مانده است. این حالت زمانی ایجاد می‌شود که
پروسس والد هنوز وضعیت خروج پروسس فرزند را نخوانده باشد.</p>
<h3 id="ت-پروسس-orphan-چیست-و-در-چه-شرایطی-ایجاد-میشود">ت) پروسس orphan
چیست و در چه شرایطی ایجاد می‌شود؟</h3>
<p>پروسس orphan پروسسی است که والد آن قبل از اتمام اجرای پروسس فرزند
خاتمه یافته است. در این شرایط، پروسس فرزند به پروسس init (PID 1) تعلق
می‌گیرد.</p>
<h3 id="ث-برنامه-زیر-باعث-ایجاد-پروسس-orphan-میشود-یا-zombie-چرا">ث)
برنامه زیر باعث ایجاد پروسس orphan می‌شود یا zombie؟ چرا؟</h3>
<div class="sourceCode" id="cb2"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;sys/wait.h&gt;</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a> pid_t child_pid <span class="op">=</span> fork<span class="op">();</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> <span class="op">(</span>child_pid <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Parent process</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  sleep<span class="op">(</span><span class="dv">60</span><span class="op">);</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>child_pid <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Child process</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  exit<span class="op">(</span><span class="dv">0</span><span class="op">);</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>این برنامه باعث ایجاد پروسس zombie می‌شود. زیرا پروسس فرزند به سرعت
خاتمه می‌یابد ولی پروسس والد به مدت 60 ثانیه به خواب می‌رود و وضعیت خروج
پروسس فرزند را نمی‌خواند.</p>
<h2 id="سوال-3">سوال 3</h2>
<h3 id="الف-تفاوت-program-و-process-را-توضیح-دهید">الف) تفاوت program و
process را توضیح دهید</h3>
<ul>
<li><strong>Program</strong>: یک برنامه (Program) مجموعه‌ای از دستورات و
کدها است که بر روی دیسک ذخیره شده و هنوز در حال اجرا نیست. برنامه‌ها
فایل‌های اجرایی هستند که می‌توانند توسط سیستم عامل بارگذاری و اجرا
شوند.</li>
<li><strong>Process</strong>: یک پروسس (Process) نمونه‌ای از یک برنامه در
حال اجرا است. پروسس شامل کد برنامه، داده‌ها، و منابع مورد نیاز برای اجرا
می‌باشد. هر پروسس فضای حافظه و منابع مستقل خود را دارد.</li>
</ul>
<h3 id="ب-state-های-ممکن-برای-یک-پروسس-را-نام-ببرید-و-توضیح-دهید">ب)
state های ممکن برای یک پروسس را نام ببرید و توضیح دهید</h3>
<ol type="1">
<li><strong>New</strong>: پروسس تازه ایجاد شده و هنوز آماده اجرا
نیست.</li>
<li><strong>Ready</strong>: پروسس آماده اجرا است و منتظر تخصیص CPU
می‌باشد.</li>
<li><strong>Running</strong>: پروسس در حال اجرا بر روی CPU است.</li>
<li><strong>Waiting</strong>: پروسس منتظر یک رویداد یا منبع خاص است و
نمی‌تواند اجرا شود.</li>
<li><strong>Terminated</strong>: پروسس اجرای خود را به پایان رسانده و
منابع آن آزاد شده‌اند.</li>
</ol>
<h3 id="پ-عاملی-را-نام-ببرید-که-باعث-میشود-پروسس-ای-که-درون-cpu-در-حال-اجراست-از-cpu-خارج-شده-و-در-حالت-ready-قرار-بگیرد">پ)
عاملی را نام ببرید که باعث می‌شود پروسس ای که درون CPU در حال اجراست، از
CPU خارج شده و در حالت ready قرار بگیرد</h3>
<ul>
<li><strong>Interrupt</strong>: یک وقفه (Interrupt) می‌تواند باعث شود که
پروسس در حال اجرا از CPU خارج شده و در حالت ready قرار بگیرد. این وقفه
می‌تواند توسط سخت‌افزار یا سیستم عامل ایجاد شود.</li>
</ul>
<h3 id="ت-برای-تغییر-وضعیت-یک-پروسس-از-حالت-اجرا-running-به-انتظار-waiting-دو-عامل-نام-ببرید">ت)
برای تغییر وضعیت یک پروسس از حالت اجرا (running) به انتظار (waiting) دو
عامل نام ببرید</h3>
<ol type="1">
<li><strong>I/O Request</strong>: درخواست ورودی/خروجی (I/O) می‌تواند باعث
شود که پروسس از حالت اجرا به حالت انتظار تغییر وضعیت دهد تا عملیات I/O
تکمیل شود.</li>
<li><strong>Resource Request</strong>: درخواست منابعی که در دسترس
نیستند، مانند قفل‌ها یا حافظه، می‌تواند باعث شود که پروسس به حالت انتظار
برود تا منابع مورد نیاز آزاد شوند.</li>
</ol>
<h2 id="سوال-4">سوال 4</h2>
<h3 id="الف-تفاوت-بین-message-passing-و-shared-memory-را-در-ارتباط-بین-فرآیندها-توضیح-دهید">الف)
تفاوت بین message passing و shared memory را در ارتباط بین فرآیندها
توضیح دهید</h3>
<p>در ارتباط بین فرآیندها (IPC)، دو روش اصلی وجود دارد: message passing
و shared memory.</p>
<ul>
<li><strong>Message Passing</strong>: در این روش، فرآیندها با ارسال و
دریافت پیام‌ها با یکدیگر ارتباط برقرار می‌کنند. این روش نیاز به هماهنگی
سیستم عامل دارد و معمولاً برای ارتباط بین فرآیندهایی که در سیستم‌های توزیع
شده اجرا می‌شوند، مناسب است.</li>
<li><strong>Shared Memory</strong>: در این روش، یک بخش از حافظه به صورت
مشترک بین فرآیندها استفاده می‌شود. فرآیندها می‌توانند به طور مستقیم به این
حافظه دسترسی داشته باشند و داده‌ها را به اشتراک بگذارند. این روش نیاز به
هماهنگی و همگام‌سازی بین فرآیندها دارد تا از تداخل داده‌ها جلوگیری
شود.</li>
</ul>
<h3 id="ب-نحوه-استفاده-از-pipe-در-ارتباط-بین-فرآیندها-را-توضیح-دهید-و-یک-مثال-ساده-از-آن-بنویسید">ب)
نحوه استفاده از pipe در ارتباط بین فرآیندها را توضیح دهید و یک مثال ساده
از آن بنویسید</h3>
<p>Pipe یکی از روش‌های ارتباط بین فرآیندها است که به فرآیندها اجازه می‌دهد
تا داده‌ها را به صورت یک طرفه از یک فرآیند به فرآیند دیگر ارسال کنند. در
سیستم‌های یونیکس و لینوکس، pipe با استفاده از تابع <code>pipe()</code>
ایجاد می‌شود.</p>
<p>مثال ساده از استفاده از pipe:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="dt">int</span> fd<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  pid_t pid<span class="op">;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="dt">char</span> write_msg<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, world!&quot;</span><span class="op">;</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="dt">char</span> read_msg<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Create a pipe</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>pipe<span class="op">(</span>fd<span class="op">)</span> <span class="op">==</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>    perror<span class="op">(</span><span class="st">&quot;pipe&quot;</span><span class="op">);</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  pid <span class="op">=</span> fork<span class="op">();</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>pid <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    perror<span class="op">(</span><span class="st">&quot;fork&quot;</span><span class="op">);</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> <span class="op">(</span>pid <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Parent process</span></span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>    close<span class="op">(</span>fd<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> <span class="co">// Close unused read end</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>    write<span class="op">(</span>fd<span class="op">[</span><span class="dv">1</span><span class="op">],</span> write_msg<span class="op">,</span> strlen<span class="op">(</span>write_msg<span class="op">)</span> <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>    close<span class="op">(</span>fd<span class="op">[</span><span class="dv">1</span><span class="op">]);</span> <span class="co">// Close write end after writing</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">// Child process</span></span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>    close<span class="op">(</span>fd<span class="op">[</span><span class="dv">1</span><span class="op">]);</span> <span class="co">// Close unused write end</span></span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>    read<span class="op">(</span>fd<span class="op">[</span><span class="dv">0</span><span class="op">],</span> read_msg<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>read_msg<span class="op">));</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Child received: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> read_msg<span class="op">);</span></span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>    close<span class="op">(</span>fd<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> <span class="co">// Close read end after reading</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">}</span></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>در این مثال، فرآیند والد پیامی را از طریق pipe به فرآیند فرزند ارسال
می‌کند و فرآیند فرزند آن را دریافت و چاپ می‌کند.</p>
<h2 id="سوال-5">سوال 5</h2>
<div class="sourceCode" id="cb4"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="dt">const</span><span class="op">*</span> argv<span class="op">[])</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a> <span class="dt">int</span> i<span class="op">,</span> pid<span class="op">;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a> <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  fork<span class="op">();</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> getpid<span class="op">());</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  pid <span class="op">=</span> wait<span class="op">(</span>NULL<span class="op">);</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> pid<span class="op">);</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="الف-درخت-پروسسها">الف) درخت پروسس‌ها</h3>
<pre class="plaintext"><code>        100
       / | \
     101 102 103
    /|   /|   /|
  104 105 106 107</code></pre>
<h3 id="ب-آنچه-در-ترمینال-چاپ-میشود">ب) آنچه در ترمینال چاپ می‌شود</h3>
<pre class="plaintext"><code>100
101
-1
101
102
-1
102
103
-1
103
102
101
104
-1
104
101
100
105
-1
105
106
-1
106
105
100
107
-1
107</code></pre>
<h3 id="پ-ترتیب-به-اتمام-رسیدن-پروسسها">پ) ترتیب به اتمام رسیدن
پروسس‌ها</h3>
<p>پروسس 100 شروع می‌شود. پروسس 101 شروع می‌شود. پروسس 101 به پایان می‌رسد
(-1). پروسس 102 شروع می‌شود. پروسس 102 به پایان می‌رسد (-1). پروسس 103
شروع می‌شود. پروسس 103 به پایان می‌رسد (-1). پروسس 102 دوباره شروع می‌شود.
پروسس 101 دوباره شروع می‌شود. پروسس 104 شروع می‌شود. پروسس 104 به پایان
می‌رسد (-1). پروسس 101 دوباره شروع می‌شود. پروسس 100 دوباره شروع می‌شود.
پروسس 105 شروع می‌شود. پروسس 105 به پایان می‌رسد (-1). پروسس 106 شروع
می‌شود.</p>
<pre class="plaintext"><code>101, 102, 103, 104, 105, 106, 107</code></pre>
<h2 id="سوال-6">سوال 6</h2>
<div class="sourceCode" id="cb8"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;sys/types.h&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> gloabal_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="dt">const</span><span class="op">*</span> argv<span class="op">[])</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a> <span class="dt">int</span> local_var <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a> pid_t pid <span class="op">=</span> fork<span class="op">();</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a> <span class="cf">if</span> <span class="op">(</span>pid <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Child process</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  gloabal_var <span class="op">+=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>  local_var <span class="op">+=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a>  printf<span class="op">(</span><span class="st">&quot;Child: global_var = </span><span class="sc">%d</span><span class="st">, local_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> gloabal_var<span class="op">,</span> local_var<span class="op">);</span></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>pid <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a> <span class="op">{</span></span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  <span class="co">// Parent process</span></span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>  sleep<span class="op">(</span><span class="dv">10</span><span class="op">);</span></span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  printf<span class="op">(</span><span class="st">&quot;Parent: global_var = </span><span class="sc">%d</span><span class="st">, local_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> gloabal_var<span class="op">,</span> local_var<span class="op">);</span></span>
<span id="cb8-25"><a href="#cb8-25" aria-hidden="true" tabindex="-1"></a> <span class="op">}</span></span>
<span id="cb8-26"><a href="#cb8-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-27"><a href="#cb8-27" aria-hidden="true" tabindex="-1"></a> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-28"><a href="#cb8-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="توضیح">توضیح</h2>
<h3 id="پروسس-والد">پروسس والد</h3>
<ul>
<li>متغیر سراسری <code>gloabal_var</code> مقدار اولیه 10 را دارد.</li>
<li>متغیر محلی <code>local_var</code> مقدار اولیه 20 را دارد.</li>
<li>پس از اجرای <code>fork()</code>، پروسس والد به شرط
<code>else if (pid &gt; 0)</code> می‌رود و یک ثانیه صبر می‌کند تا پروسس
فرزند ابتدا اجرا شود.</li>
<li>سپس مقدار متغیرهای <code>gloabal_var</code> و <code>local_var</code>
را چاپ می‌کند.</li>
</ul>
<h3 id="پروسس-فرزند">پروسس فرزند</h3>
<ul>
<li>پس از اجرای <code>fork()</code>، پروسس فرزند به شرط
<code>if (pid == 0)</code> می‌رود.</li>
<li>متغیر سراسری <code>gloabal_var</code> را 10 واحد افزایش می‌دهد (مقدار
جدید 20).</li>
<li>متغیر محلی <code>local_var</code> را 10 واحد افزایش می‌دهد (مقدار
جدید 30).</li>
<li>سپس مقدار متغیرهای <code>gloabal_var</code> و <code>local_var</code>
را چاپ می‌کند.</li>
</ul>
<h3 id="خروجی">خروجی</h3>
<p>با توجه به توضیحات بالا، خروجی برنامه به این صورت خواهد بود:</p>
<pre class="plaintext"><code>Child Process: gloabal_var = 20, local_var = 30
Parent Process: gloabal_var = 10, local_var = 20</code></pre>
<h3 id="توضیح-خروجی">توضیح خروجی</h3>
<ul>
<li>پروسس فرزند متغیرهای خود را تغییر می‌دهد و مقادیر جدید را چاپ
می‌کند.</li>
<li>پروسس والد متغیرهای خود را تغییر نمی‌دهد و مقادیر اولیه را چاپ
می‌کند.</li>
<li>هر پروسس کپی جداگانه‌ای از متغیرها دارد و تغییرات در یک پروسس بر
دیگری تأثیری ندارد.</li>
</ul>
<h2 id="سوال-7">سوال 7</h2>
<h3 id="الف-ترد-و-پروسس-را-از-دیدگاههای-متفاوت-بررسی-کنید">الف) ترد و
پروسس را از دیدگاه‌های متفاوت بررسی کنید</h3>
<ul>
<li><strong>تعریف</strong>:
<ul>
<li><strong>پروسس</strong>: یک برنامه در حال اجرا است که شامل کد برنامه،
داده‌ها، و منابع مورد نیاز برای اجرا می‌باشد.</li>
<li><strong>ترد</strong>: واحد اجرایی کوچکتری است که در داخل یک پروسس
اجرا می‌شود و منابع پروسس را به اشتراک می‌گذارد.</li>
</ul></li>
<li><strong>استفاده از منابع</strong>:
<ul>
<li><strong>پروسس</strong>: هر پروسس دارای فضای حافظه و منابع مستقل خود
است.</li>
<li><strong>ترد</strong>: تردها حافظه و منابع پروسس والد خود را به
اشتراک می‌گذارند.</li>
</ul></li>
<li><strong>امنیت</strong>:
<ul>
<li><strong>پروسس</strong>: پروسس‌ها از یکدیگر جدا هستند و دسترسی به
حافظه یکدیگر ندارند، که امنیت بیشتری فراهم می‌کند.</li>
<li><strong>ترد</strong>: تردها به حافظه مشترک دسترسی دارند، که می‌تواند
منجر به مشکلات امنیتی و تداخل داده‌ها شود.</li>
</ul></li>
<li><strong>زمان‌بندی و مدیریت</strong>:
<ul>
<li><strong>پروسس</strong>: ایجاد و مدیریت پروسس‌ها هزینه‌برتر است و زمان
بیشتری می‌برد.</li>
<li><strong>ترد</strong>: تردها سبک‌تر هستند و مدیریت آن‌ها سریع‌تر و
کم‌هزینه‌تر است.</li>
</ul></li>
</ul>
<h3 id="ب-مزیت-ایجاد-ترد-نسبت-به-پروسس-و-دلایل-استفاده-از-برنامههای-multiprocess">ب)
مزیت ایجاد ترد نسبت به پروسس و دلایل استفاده از برنامه‌های
multiprocess</h3>
<ul>
<li><p><strong>مزیت‌های ترد</strong>:</p>
<ul>
<li><strong>کارایی بالاتر</strong>: تردها به دلیل اشتراک منابع و حافظه،
سریع‌تر از پروسس‌ها ایجاد و مدیریت می‌شوند.</li>
<li><strong>ارتباط سریع‌تر</strong>: تردها به دلیل اشتراک حافظه، می‌توانند
سریع‌تر با یکدیگر ارتباط برقرار کنند.</li>
<li><strong>استفاده بهینه از منابع</strong>: تردها منابع کمتری نسبت به
پروسس‌ها مصرف می‌کنند.</li>
</ul></li>
<li><p><strong>دلایل استفاده از برنامه‌های multiprocess</strong>:</p>
<ul>
<li><strong>پایداری و امنیت</strong>: پروسس‌ها از یکدیگر جدا هستند و
خرابی یک پروسس تأثیری بر پروسس‌های دیگر ندارد.</li>
<li><strong>استفاده از چند هسته‌ای</strong>: برنامه‌های multiprocess
می‌توانند از چند هسته پردازنده به طور همزمان استفاده کنند و کارایی را
افزایش دهند.</li>
<li><strong>مدیریت بهتر منابع</strong>: در برخی موارد، استفاده از
پروسس‌ها برای مدیریت منابع و جلوگیری از تداخل داده‌ها مناسب‌تر است.</li>
</ul>
<h2 id="سوال-8">سوال 8</h2>
<h3 id="الف-تفاوت-بین-parallelism-و-concurrency">الف) تفاوت بین
Parallelism و Concurrency</h3>
<p>در سیستم‌های چند هسته‌ای، taskها می‌توانند به دو صورت موازی
(Parallelism) و هم‌روند (Concurrency) اجرا شوند. تفاوت این دو روش به شرح
زیر است:</p>
<ul>
<li><p><strong>Parallelism</strong>: در این روش، taskها به طور همزمان و
واقعی بر روی چندین هسته پردازنده اجرا می‌شوند. هر هسته یک task را اجرا
می‌کند و این باعث افزایش کارایی و سرعت اجرای برنامه می‌شود.</p></li>
<li><p><strong>Concurrency</strong>: در این روش، taskها به صورت هم‌روند
اجرا می‌شوند، اما لزوماً به طور همزمان بر روی چندین هسته پردازنده اجرا
نمی‌شوند. در واقع، taskها به نوبت و با استفاده از زمان‌بندی سیستم عامل بر
روی یک یا چند هسته اجرا می‌شوند.</p></li>
</ul>
<h4 id="شکل-تفاوت-بین-parallelism-و-concurrency">شکل تفاوت بین
Parallelism و Concurrency</h4>
<pre class="plaintext"><code>Parallelism (موازی):
+---------+---------+
| Task 1  | Task 2  |  Core 1
+---------+---------+
| Task 3  | Task 4  |  Core 2
+---------+---------+

Concurrency (هم‌روند):
+---------+---------+
| Task 1  | Task 2  |  Core 1
+---------+---------+
| Task 3  | Task 4  |  Core 1
+---------+---------+</code></pre>
<p>در Parallelism، taskها به طور همزمان بر روی هسته‌های مختلف اجرا
می‌شوند، در حالی که در Concurrency، taskها به نوبت بر روی یک یا چند هسته
اجرا می‌شوند.</p></li>
</ul>
<h3 id="ب-کد-زیر-را-در-نظر-بگیرید.-تابع-pthread_create-یک-ریسمان-جدید-را-در-فرآیند-فراخوانی-شروع-میکند">ب)
کد زیر را در نظر بگیرید. تابع <code>pthread_create()</code> یک ریسمان
جدید را در فرآیند فراخوانی شروع می‌کند</h3>
<p>چند فرآیند منحصر به فرد ایجاد می‌شود؟ چه تعداد رشته منحصر به فرد ایجاد
می‌شود؟</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>pid_t pid <span class="op">=</span> fork<span class="op">();</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>pid <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a> fork<span class="op">();</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a> pthread_create<span class="op">(&amp;</span>thread<span class="op">,</span> NULL<span class="op">,</span> thread_function<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>fork<span class="op">();</span></span></code></pre></div>
<p>در این کد، تعداد فرآیندها و رشته‌های منحصر به فرد به شرح زیر است:</p>
<ul>
<li><strong>فرآیندها</strong>:
<ul>
<li>اولین <code>fork()</code> دو فرآیند ایجاد می‌کند.</li>
<li>دومین <code>fork()</code> در بلوک <code>if (pid == 0)</code> یک
فرآیند دیگر ایجاد می‌کند.</li>
<li>سومین <code>fork()</code> سه فرآیند دیگر ایجاد می‌کند.</li>
<li>در مجموع، 6 فرآیند منحصر به فرد ایجاد می‌شود.</li>
</ul></li>
<li><strong>رشته‌ها</strong>:
<ul>
<li>تابع <code>pthread_create()</code> یک رشته جدید در فرآیند فرزند
دومین <code>fork()</code> ایجاد می‌کند و یک رشته دیگر در نوه فرآیند اول
ایجاد می‌شود.</li>
<li>بنابراین، 2 رشته منحصر به فرد ایجاد می‌شود.</li>
</ul></li>
</ul>
<p>با توجه به خروجی داده شده:</p>
<ul>
<li>فرآیندهای منحصر به فرد: 6</li>
<li>رشته‌های منحصر به فرد: 2</li>
</ul>
<h2 id="سوال-9">سوال 9</h2>
<h3 id="کد-برنامه-ساده-shell">کد برنامه ساده Shell</h3>
<div class="sourceCode" id="cb12"><pre class="sourceCode bash"><code class="sourceCode bash"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to execute a command</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="fu">execute_command()</span> <span class="kw">{</span></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st">&quot;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to execute a piped command</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="fu">execute_piped_command()</span> <span class="kw">{</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>  <span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st"> | </span><span class="va">$2</span><span class="st">&quot;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="co"># Function to redirect output of a command to a file</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="fu">redirect_output_to_file()</span> <span class="kw">{</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="bu">eval</span> <span class="st">&quot;</span><span class="va">$1</span><span class="st"> &gt; </span><span class="va">$2</span><span class="st">&quot;</span></span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a><span class="kw">}</span></span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Main script logic</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;Choose an option:&quot;</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;1. Execute a command&quot;</span></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;2. Execute a piped command&quot;</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a><span class="bu">echo</span> <span class="st">&quot;3. Redirect output of a command to a file&quot;</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a><span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter your choice: &quot;</span> <span class="va">choice</span></span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a><span class="cf">case</span> <span class="va">$choice</span> <span class="kw">in</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a><span class="ss">1</span><span class="kw">)</span></span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>  <span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter the command to execute: &quot;</span> <span class="va">cmd</span></span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>  <span class="ex">execute_command</span> <span class="st">&quot;</span><span class="va">$cmd</span><span class="st">&quot;</span></span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a><span class="ss">2</span><span class="kw">)</span></span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>  <span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter the first command: &quot;</span> <span class="va">cmd1</span></span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>  <span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter the second command: &quot;</span> <span class="va">cmd2</span></span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>  <span class="ex">execute_piped_command</span> <span class="st">&quot;</span><span class="va">$cmd1</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$cmd2</span><span class="st">&quot;</span></span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a><span class="ss">3</span><span class="kw">)</span></span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>  <span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter the command: &quot;</span> <span class="va">cmd</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="bu">read</span> <span class="at">-p</span> <span class="st">&quot;Enter the file name: &quot;</span> <span class="va">file</span></span>
<span id="cb12-38"><a href="#cb12-38" aria-hidden="true" tabindex="-1"></a>  <span class="ex">redirect_output_to_file</span> <span class="st">&quot;</span><span class="va">$cmd</span><span class="st">&quot;</span> <span class="st">&quot;</span><span class="va">$file</span><span class="st">&quot;</span></span>
<span id="cb12-39"><a href="#cb12-39" aria-hidden="true" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb12-40"><a href="#cb12-40" aria-hidden="true" tabindex="-1"></a><span class="pp">*</span><span class="kw">)</span></span>
<span id="cb12-41"><a href="#cb12-41" aria-hidden="true" tabindex="-1"></a>  <span class="bu">echo</span> <span class="st">&quot;Invalid choice&quot;</span></span>
<span id="cb12-42"><a href="#cb12-42" aria-hidden="true" tabindex="-1"></a>  <span class="cf">;;</span></span>
<span id="cb12-43"><a href="#cb12-43" aria-hidden="true" tabindex="-1"></a><span class="cf">esac</span></span></code></pre></div>
<h3 id="روش-پیادهسازی">روش پیاده‌سازی</h3>
<ul>
<li><strong>الف) پایپ دو دستور</strong>:
<ul>
<li>در این روش، خروجی دستور اول به عنوان ورودی دستور دوم استفاده می‌شود.
برای مثال، <code>ls -l | grep &quot;os&quot;</code> لیست فایل‌ها را فیلتر می‌کند تا
فقط فایل‌هایی که شامل “os” هستند نمایش داده شوند.</li>
<li>در کد بالا، تابع <code>execute_piped_command</code> برای اجرای
دستورات پایپ شده استفاده می‌شود. این تابع دو دستور را به عنوان ورودی
می‌گیرد و با استفاده از <code>eval</code> و عملگر <code>|</code> آن‌ها را
اجرا می‌کند.</li>
</ul></li>
<li><strong>ب) ارسال خروجی یک دستور به یک فایل</strong>:
<ul>
<li>در این روش، خروجی یک دستور به جای نمایش در خروجی استاندارد، به یک
فایل مشخص ارسال می‌شود. برای مثال، <code>ls -l &gt; file.txt</code> خروجی
دستور <code>ls -l</code> را در فایل <code>file.txt</code> ذخیره
می‌کند.</li>
<li>در کد بالا، تابع <code>redirect_output_to_file</code> برای انجام این
کار استفاده می‌شود. این تابع دستور و نام فایل را به عنوان ورودی می‌گیرد و
با استفاده از <code>eval</code> و عملگر <code>&gt;</code> خروجی دستور را
به فایل مشخص شده هدایت می‌کند.</li>
</ul></li>
</ul>
</body>
</html>
